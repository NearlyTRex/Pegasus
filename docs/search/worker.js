var n,e,o="function"==typeof importScripts?".":"/search/",t=!1,r={},s=["en"];function i(n,e){0!==n.length?function(n,e){console.log("Loading script: "+n),$.getScript(o+n).done((function(){e()})).fail((function(n,e,o){console.log("Error: "+o)}))}(n[0],(function(){i(n.slice(1),e)})):e()}function l(){var n,o,t=["lunr.js"];if((e=JSON.parse(this.responseText)).config&&e.config.lang&&e.config.lang.length&&(s=e.config.lang),s.length>1||"en"!==s[0]){t.push("lunr.stemmer.support.js"),s.length>1&&t.push("lunr.multi.js"),(s.includes("ja")||s.includes("jp"))&&t.push("tinyseg.js");for(var r=0;r<s.length;r++)"en"!=s[r]&&t.push(["lunr",s[r],"js"].join("."))}n=t,o=c,"function"==typeof importScripts?(importScripts.apply(null,n),o()):i(n,o)}function c(){console.log("All search scripts loaded, building Lunr index..."),e.config&&e.config.separator&&e.config.separator.length&&(lunr.tokenizer.separator=new RegExp(e.config.separator)),e.index?(n=lunr.Index.load(e.index),e.docs.forEach((function(n){r[n.location]=n})),console.log("Lunr pre-built index loaded, search ready")):(n=lunr((function(){1===s.length&&"en"!==s[0]&&lunr[s[0]]?this.use(lunr[s[0]]):s.length>1&&this.use(lunr.multiLanguage.apply(null,s)),this.field("title"),this.field("text"),this.ref("location");for(var n=0;n<e.docs.length;n++){var o=e.docs[n];this.add(o),r[o.location]=o}})),console.log("Lunr index built, search ready")),t=!0,postMessage({config:e.config}),postMessage({allowSearch:t})}function a(e){if(t){for(var o=[],s=n.search(e),i=0;i<s.length;i++){var l=s[i];doc=r[l.ref],doc.summary=doc.text.substring(0,200),o.push(doc)}return o}console.error("Assets for search still loading")}"function"==typeof importScripts&&(onmessage=function(n){n.data.init?function(){var n=new XMLHttpRequest;n.addEventListener("load",l);var e=o+"/search_index.json";"function"==typeof importScripts&&(e="search_index.json"),n.open("GET",e),n.send()}():n.data.query?postMessage({results:a(n.data.query)}):console.error("Worker - Unrecognized message: "+n)});